{"mappings":"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","sources":["src/js/modal.js","src/js/refs.js","src/js/local-storage.js","src/js/data/keys.js"],"sourcesContent":["import { modalCloseBtn, modalWatchBtn, modalQueueBtn, backdrop } from './refs';\nimport { checkWatchBtn, checkQueueBtn } from './local-storage';\n\nfunction onCloseModal(event) {\n\n  window.removeEventListener('keydown', onEscPress);\n  modalWatchBtn.removeEventListener('click', checkWatchBtn);\n  modalQueueBtn.removeEventListener('click', checkQueueBtn);\n  backdrop.classList.add('is-hidden');\n  backdrop.removeEventListener('click', onBackdropClick);\n}\n\nfunction onBackdropClick(e) {\n  e.preventDefault();\n  if (e.target === backdrop || e.target.getAttribute('data-close') == '') {\n    onCloseModal();\n  }\n}\nfunction onEscPress(event) {\n  if (event.code === 'Escape') {\n    onCloseModal();\n  }\n}\n\nexport { onEscPress, onCloseModal, onBackdropClick };\n","const form = document.querySelector('.header__form');\nconst paginationEl = document.querySelector('#pagination');\nconst gallery = document.querySelector('.gallery__list');\nconst galleryListEl = document.querySelector('.gallery__item');\nconst modalCloseBtn = document.querySelector('.modal__close-btn');\nconst modalWatchBtn = document.querySelector('.modal__watch-btn');\nconst modalQueueBtn = document.querySelector('.modal__queueBtn');\nconst footerTeamLink = document.querySelector('.footer__link');\nconst myLibWatchBtn = document.querySelector('.header__watch-btn');\nconst myLibQueueBtn = document.querySelector('.header__queue-btn');\nconst btnToTop = document.querySelector('.back-to-top');\nconst backdrop = document.querySelector('.backdrop');\nconst modal = document.querySelector('.modal');\nconst modalRenderBox = document.querySelector('.modal__render-box');\nconst jsLibrary = document.querySelector('.js-library');\nconst storageChoice = document.querySelector('.js-choice-storage');\nconst watchedChoice = document.querySelector('#js-WatchedButton');\nconst queueChoice = document.querySelector('#js-QueueButton');\nconst emptyGallery = document.querySelector('.unfilled-list');\nconst ref = {\n  spinner: document.querySelector('#spinner'),\n};\n\nexport {\n  ref,\n  form,\n  gallery,\n  paginationEl,\n  galleryListEl,\n  modalCloseBtn,\n  modalWatchBtn,\n  modalQueueBtn,\n  footerTeamLink,\n  spinner,\n  myLibWatchBtn,\n  myLibQueueBtn,\n  btnToTop,\n  backdrop,\n  modal,\n  modalRenderBox,\n  jsLibrary,\n  storageChoice,\n  watchedChoice,\n  queueChoice,\n  emptyGallery,\n};\n","import { modalWatchBtn, modalQueueBtn } from './refs';\nimport { WATCHSTORAGE_KEY, QUEUESTORAGE_KEY } from './data/keys';\n\nfunction checkWatchBtn(e) {\n  e.target.dataset.id;\n  const movieId = e.target.dataset.id;\n\n  let arr1 = localStorage.getItem(WATCHSTORAGE_KEY);\n  arr1 = arr1 ? JSON.parse(arr1) : [];\n\n  const inStorage = arr1.find(storageId => storageId === movieId);\n\n  if (!inStorage) {\n    addToWatched(movieId);\n    return;\n  } else {\n    deleteWatch(movieId);\n  }\n}\n\nfunction addToWatched(id) {\n  let arr = localStorage.getItem(WATCHSTORAGE_KEY);\n  arr = arr ? JSON.parse(arr) : [];\n  const movieId = String(id);\n  arr.push(movieId);\n  const movieEl = JSON.stringify(arr);\n  localStorage.setItem(WATCHSTORAGE_KEY, movieEl);\n  modalWatchBtn.textContent = 'watched';\n  return;\n}\n\nfunction deleteWatch(id) {\n  let arr = localStorage.getItem(WATCHSTORAGE_KEY);\n  arr = arr ? JSON.parse(arr) : [];\n\n  const filterArr = arr.filter(localId => localId !== id);\n  const movieEl = JSON.stringify(filterArr);\n\n  localStorage.setItem(WATCHSTORAGE_KEY, movieEl);\n  modalWatchBtn.textContent = 'add to watched';\n  if (arr.length === 0) {\n    localStorage.removeItem(WATCHSTORAGE_KEY);\n    return;\n  }\n}\n\nfunction checkQueueBtn(e) {\n  e.target.dataset.id;\n  const movieId = e.target.dataset.id;\n\n  let arr1 = localStorage.getItem(QUEUESTORAGE_KEY);\n  arr1 = arr1 ? JSON.parse(arr1) : [];\n\n  const inStorage = arr1.find(storageId => storageId === movieId);\n\n  if (!inStorage) {\n    addToQueue(movieId);\n    return;\n  } else {\n    deleteToQueue(movieId);\n  }\n}\n\nfunction addToQueue(id) {\n  let arr = localStorage.getItem(QUEUESTORAGE_KEY);\n  arr = arr ? JSON.parse(arr) : [];\n\n  const movieId = String(id);\n\n  arr.push(movieId);\n  const movieEl = JSON.stringify(arr);\n\n  localStorage.setItem(QUEUESTORAGE_KEY, movieEl);\n  modalQueueBtn.textContent = 'added';\n  return;\n}\n\nfunction deleteToQueue(id) {\n  let arr2 = localStorage.getItem(QUEUESTORAGE_KEY);\n  arr2 = arr2 ? JSON.parse(arr2) : [];\n\n  const filterArr = arr2.filter(localId => localId !== id);\n  const movieEl = JSON.stringify(filterArr);\n\n  localStorage.setItem(QUEUESTORAGE_KEY, movieEl);\n  modalQueueBtn.textContent = 'add to queue';\n\n  if (arr2.length === 0) {\n    localStorage.removeItem(QUEUESTORAGE_KEY);\n    return;\n  }\n}\n\nexport { checkWatchBtn, checkQueueBtn };\n","const WATCHSTORAGE_KEY = 'watchStorage';\nconst QUEUESTORAGE_KEY = 'queueStorage';\n\nexport { WATCHSTORAGE_KEY, QUEUESTORAGE_KEY };\n"],"names":["$4Nugj","parcelRequire","$40873ecf3c18e122$export$9dc820945641dd09","event","window","removeEventListener","$40873ecf3c18e122$export$dbab9cfe85d8f28","modalWatchBtn","$4LMMA","checkWatchBtn","modalQueueBtn","checkQueueBtn","backdrop","classList","add","$40873ecf3c18e122$export$21e7b9f4635e7aa6","e","preventDefault","target","getAttribute","code","$37e33676934ad046$export$6210fa4921d2a466","document","querySelector","$37e33676934ad046$export$4c194deb2f0d1984","$37e33676934ad046$export$b21c1b4271bdbe93","$37e33676934ad046$export$df907aca2fb4f8bc","$37e33676934ad046$export$1c122b6f08e4553e","$37e33676934ad046$export$5a62691db8f9c06","$37e33676934ad046$export$9829dcd28fa79913","$37e33676934ad046$export$f1553a5662cd6555","$37e33676934ad046$export$48e901322468f6d5","$37e33676934ad046$export$39852090f05cc72a","$37e33676934ad046$export$19a5062e4869c6b6","$37e33676934ad046$export$538d6642aa4652c9","$37e33676934ad046$export$3b064d6d42674266","$37e33676934ad046$export$eff4d24c3ff7876e","spinner","$3791646d3ae2cee8$export$9664813cc901fc75","dataset","id","movieId","arr1","localStorage","getItem","$1lbol","WATCHSTORAGE_KEY","JSON","parse","find","storageId","arr","filterArr","filter","localId","movieEl","stringify","setItem","textContent","length","removeItem","$3791646d3ae2cee8$var$deleteWatch","String","push","$3791646d3ae2cee8$var$addToWatched","$3791646d3ae2cee8$export$3a548553a1f289af","QUEUESTORAGE_KEY","arr2","$3791646d3ae2cee8$var$deleteToQueue","$3791646d3ae2cee8$var$addToQueue","$0fa096c3055373d3$export$4ec989039c9059a0","$0fa096c3055373d3$export$917d6def6a4539c2"],"version":3,"file":"myLib.3b40c926.js.map"}